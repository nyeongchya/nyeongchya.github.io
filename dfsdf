import React, { useEffect, useRef, useState } from 'react'
import { motion } from 'framer-motion'
import { Mail, Lock, List, Home, MapPin, Zap, Key, EyeOff } from 'lucide-react'

/*
OverCity 2098 â€” Broker Nexus (full extension)
- ì´ ë¬¸ì„œëŠ” ê¸°ì¡´ ì½”ë“œì— 'ì‚´ì„ ë¶™ì´ëŠ”' ë°©ì‹ìœ¼ë¡œ í™•ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.
- ìƒˆë¡œ ì¶”ê°€ëœ ì£¼ìš” ê¸°ëŠ¥:
  1) ë¡œì»¬ ë¸Œë¡œì»¤ ê³„ì • ë“±ë¡/í•´ì‹œ ì €ì¥ (Web Crypto ê¸°ë°˜ ë¹„ë°€ë²ˆí˜¸ í•´ì‹±)
  2) ë¡œê·¸ì¸/í† í° ë°œê¸‰(ë¡œì»¬) â€” ì‹¤ì œ ë°±ì—”ë“œ ì—°ë™ìš© mock APIì™€ API ìŠ¤í™ ì£¼ì„ í¬í•¨
  3) í´ë¼ì´ì–¸íŠ¸ ì¸¡ AES-GCM ì•”í˜¸í™”/ë³µí˜¸í™” ìœ ì§€
  4) í™ˆ í™”ë©´ ì‹œê°Â·ì‚¬ìš´ë“œ íš¨ê³¼ ì¶”ê°€ (ìŠ¤ìº”ë¼ì¸, ë…¸ì´ì¦ˆ, ê¸€ë¦¬ì¹˜ í…ìŠ¤íŠ¸, ì €ì£¼íŒŒ í—ˆë°)
  5) ê¸€ë¦¬ì¹˜(GlitchText) ì»´í¬ë„ŒíŠ¸ë¡œ ì œëª© ë° ì¤‘ìš” í…ìŠ¤íŠ¸ ê³³ê³³ì— ê¸€ë¦¬ì¹˜ íš¨ê³¼ ì ìš©
  6) ì˜ë¢°(íƒ€ì´í•‘ ìŠ¤íƒ€ì¼) ë‚´ìš©ì„ ì¼ë°˜ì¸ì´ ë‚¨ê¸´ ì˜ë¢°ë¬¸ì²˜ëŸ¼ êµ¬ì²´í™”
  7) ë¹„ë°€ íŒì—…ì„ ë‹¨ë… ì‚¬ìš©ì(SECRET_OWNER)ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ìˆ˜ì •
  8) ë°°í¬ ê°€ì´ë“œ / ë°±ì—”ë“œ API ìŠ¤í™ ì£¼ì„ ì¶”ê°€

ì£¼ì˜: ì´ íŒŒì¼ì€ ë°ëª¨Â·ë¡œì»¬ìš©ì…ë‹ˆë‹¤. ì‹¤ì œ ìš´ì˜ ì „ ë³´ì•ˆ ê°ì‚¬ë¥¼ ë°˜ë“œì‹œ ìˆ˜í–‰í•˜ì„¸ìš”.
*/

// CONFIG
const SECRET_OWNER = 'raven' // ì´ ê³„ì •ì´ ë¡œê·¸ì¸í•˜ë©´ ë¹„ë°€ íŒì—…ì´ ë³´ì…ë‹ˆë‹¤. ìš”ì²­ì— ë”°ë¼ 'í•œ ì‚¬ëŒë§Œ' ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.

export default function OverCityApp(){
  const [route, setRoute] = useState('home')
  const [query, setQuery] = useState('')

  // --- Auth state (ë¡œì»¬ ì‚¬ìš©ì ê´€ë¦¬) ---
  const [users, setUsers] = useState(()=> JSON.parse(localStorage.getItem('oc_users') || '{}'))
  const [loggedIn, setLoggedIn] = useState(()=> JSON.parse(localStorage.getItem('oc_logged')) || {})
  const [authModalOpen, setAuthModalOpen] = useState(false)
  const [credentials, setCredentials] = useState({ user: '', pass: '' })
  const [secretUnlocked, setSecretUnlocked] = useState(false)

  // --- Domain data ---
  const [jobs, setJobs] = useState(expandedJobs)
  const [intel, setIntel] = useState(expandedIntel)
  const [mapZones, setMapZones] = useState(expandedMap)
  const [items, setItems] = useState(sampleItems)
  const [wallet, setWallet] = useState(()=> Number(localStorage.getItem('oc_wallet')) || 5000)
  const [selectedJob, setSelectedJob] = useState(null)
  const [secureMessage, setSecureMessage] = useState('')
  const [noiseOn, setNoiseOn] = useState(true)
  const audioCtxRef = useRef(null)
  const oscRef = useRef(null)

  useEffect(()=>{ localStorage.setItem('oc_wallet', String(wallet)) },[wallet])
  useEffect(()=>{ localStorage.setItem('oc_users', JSON.stringify(users)) },[users])
  useEffect(()=>{ localStorage.setItem('oc_logged', JSON.stringify(loggedIn)) },[loggedIn])

  useEffect(()=>{
    // secret popup unlocked when SECRET_OWNER is logged in
    setSecretUnlocked(Boolean(loggedIn[SECRET_OWNER]))
  },[loggedIn])

  // --- WebAudio: ì €ì£¼íŒŒ í—ˆë° (ì„ íƒì ) ---
  useEffect(()=>{
    if(noiseOn){
      try{
        const AudioCtx = window.AudioContext || window.webkitAudioContext
        audioCtxRef.current = audioCtxRef.current || new AudioCtx()
        const ctx = audioCtxRef.current
        const osc = ctx.createOscillator()
        const gain = ctx.createGain()
        osc.type = 'sine'
        osc.frequency.value = 40 // ì €ì£¼íŒŒ
        gain.gain.value = 0.004
        osc.connect(gain)
        gain.connect(ctx.destination)
        osc.start()
        oscRef.current = { osc, gain }
      }catch(e){ /* ì‚¬íŒŒë¦¬ ë“± ì¼ë¶€ ë¸Œë¼ìš°ì €ëŠ” ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í•„ìš” */ }
    }else{
      if(oscRef.current){
        try{ oscRef.current.osc.stop(); oscRef.current = null }catch(e){}
      }
    }
    return ()=>{
      if(oscRef.current){ try{ oscRef.current.osc.stop() }catch(e){} }
    }
  },[noiseOn])

  // ---------- Web Crypto helpers (ë¹„ë°€ë²ˆí˜¸ í•´ì‹œìš© + AES-GCM) ----------
  async function hashPassword(password, salt){
    const enc = new TextEncoder()
    const baseKey = await window.crypto.subtle.importKey('raw', enc.encode(password), {name:'PBKDF2'}, false, ['deriveBits'])
    const derived = await window.crypto.subtle.deriveBits({ name: 'PBKDF2', salt: enc.encode(salt), iterations: 200000, hash: 'SHA-256' }, baseKey, 256)
    const hashArr = new Uint8Array(derived)
    return btoa(String.fromCharCode(...hashArr))
  }

  async function registerBroker(user, password){
    if(!user || !password) return false
    if(users[user]) return false
    const salt = Math.random().toString(36).slice(2,12)
    const hash = await hashPassword(password, salt)
    setUsers(u => ({ ...u, [user]: { salt, hash, created: Date.now() } }))
    return true
  }

  async function verifyBroker(user, password){
    const rec = users[user]
    if(!rec) return false
    const hash = await hashPassword(password, rec.salt)
    return hash === rec.hash
  }

  // AES helpers preserved
  async function deriveKey(password, salt){
    const enc = new TextEncoder()
    const keyMat = await window.crypto.subtle.importKey('raw', enc.encode(password), {name:'PBKDF2'}, false, ['deriveKey'])
    const key = await window.crypto.subtle.deriveKey({name:'PBKDF2', salt: enc.encode(salt), iterations: 250000, hash:'SHA-256'}, keyMat, {name:'AES-GCM', length:256}, true, ['encrypt','decrypt'])
    return key
  }

  async function encryptAES(text, password){
    const iv = window.crypto.getRandomValues(new Uint8Array(12))
    const salt = window.crypto.getRandomValues(new Uint8Array(16))
    const saltB = Array.from(salt).map(n=>String.fromCharCode(n)).join('')
    const saltStr = btoa(saltB)
    const key = await deriveKey(password, saltStr)
    const enc = new TextEncoder()
    const cipher = await window.crypto.subtle.encrypt({name:'AES-GCM', iv}, key, enc.encode(text))
    const cArr = new Uint8Array(cipher)
    const ivStr = btoa(String.fromCharCode(...iv))
    const cipherStr = btoa(String.fromCharCode(...cArr))
    return `${saltStr}:${ivStr}:${cipherStr}`
  }

  async function decryptAES(pack, password){
    try{
      const [saltStr, ivStr, cipherStr] = pack.split(':')
      const ivB = atob(ivStr).split('').map(c=>c.charCodeAt(0))
      const cipherB = atob(cipherStr).split('').map(c=>c.charCodeAt(0))
      const key = await deriveKey(password, saltStr)
      const plain = await window.crypto.subtle.decrypt({name:'AES-GCM', iv: new Uint8Array(ivB)}, key, new Uint8Array(cipherB))
      return new TextDecoder().decode(plain)
    }catch(e){
      return null
    }
  }

  // ---------- Auth flows (register / login using hashed passwords) ----------
  async function handleRegister(){
    const u = prompt('ë“±ë¡í•  ë¸Œë¡œì»¤ ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: raven)')
    const p = prompt('íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”')
    if(!u||!p) return alert('ì…ë ¥ í•„ìš”')
    const ok = await registerBroker(u,p)
    if(ok) alert('ë“±ë¡ ì™„ë£Œ â€” ë¡œì»¬ ì €ì¥. í…ŒìŠ¤íŠ¸ìš© ê³„ì •ì…ë‹ˆë‹¤.')
    else alert('ì´ë¯¸ ì¡´ì¬í•˜ê±°ë‚˜ ì‹¤íŒ¨')
  }

  async function handleLogin(){
    const u = prompt('ë¸Œë¡œì»¤ ì•„ì´ë””')
    const p = prompt('íŒ¨ìŠ¤ì›Œë“œ')
    if(!u||!p) return
    const ok = await verifyBroker(u,p)
    if(ok){
      const token = await encryptAES(JSON.stringify({ user: u, ts: Date.now() }), p)
      setLoggedIn(l => ({ ...l, [u]: token }))
      alert('ë¡œê·¸ì¸ ì„±ê³µ')
      setAuthModalOpen(false)
    }else alert('ë¡œê·¸ì¸ ì‹¤íŒ¨')
  }

  function logoutUser(user){
    setLoggedIn(l => { const c = { ...l }; delete c[user]; return c })
  }

  // ---------- Market ----------
  function buyItem(id){
    const it = items.find(i=>i.id===id)
    if(!it) return
    if(wallet < it.price){ alert('ì”ì•¡ ë¶€ì¡±'); return }
    setWallet(w => w - it.price)
    setItems(items.map(i => i.id===id ? { ...i, stock: i.stock-1 } : i))
    // ë¡œì»¬ êµ¬ë§¤ ë¡œê·¸
    const p = JSON.parse(localStorage.getItem('oc_purchases') || '[]')
    p.push({ id: it.id, name: it.name, time: Date.now() })
    localStorage.setItem('oc_purchases', JSON.stringify(p))
    alert(`êµ¬ë§¤ ì™„ë£Œ: ${it.name}`)
  }

  // ---------- Mock backend API (ìŠ¤í™ í¬í•¨) ----------
  /*
    ë°±ì—”ë“œ ì—°ë™ì„ ìœ„í•´ ì•„ë˜ í•¨ìˆ˜ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
    - apiRegisterBroker(user, pass) -> POST /api/brokers/register { user, salt, hash } (ê¶Œì¥: ì„œë²„ì—ì„œ salt+hash ìƒì„±)
    - apiLogin(user, password) -> POST /api/brokers/login { user, proof } -> returns JWT
    - apiFetchJobs() -> GET /api/jobs -> returns jobs array
    - apiCreateJob(payload) -> POST /api/jobs

    ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•  ë• í˜„ì¬ registerBroker / verifyBroker ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
  */

  async function apiFetchJobs(){
    // ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” fetch('/api/jobs') ...
    return new Promise(res=> setTimeout(()=> res(expandedJobs), 300))
  }

  // ---------- UI helpers ----------
  const filteredJobs = jobs.filter(j => (j.title + j.tags.join(' ') + j.client + j.status + j.desc).toLowerCase().includes(query.toLowerCase()))

  // ---------- Render ----------
  return (
    <div className={`min-h-screen bg-gradient-to-b from-zinc-900 via-stone-900 to-black text-zinc-100 relative overflow-hidden`}> 

      {/* Global visual noise & scanlines */}
      <style>{`
        @keyframes glitch-anim { 0% { transform: translate(0,0); } 20% { transform: translate(-2px,0); } 40% { transform: translate(2px,0); } 60% { transform: translate(-1px,0); } 100% { transform: translate(0,0); } }
        .scanlines { background-image: linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px); background-size: 100% 4px; }
        .glitch-wrap { position: relative; display: inline-block }
        .glitch-wrap .glitch { position: absolute; left:0; top:0; } 
        .glitch-red { clip-path: inset(0 0 60% 0); transform: translate(1px, -1px); opacity: .85; animation: glitch-anim 1.6s linear infinite; }
        .glitch-blue { clip-path: inset(60% 0 0 0); transform: translate(-1px, 1px); opacity: .85; animation: glitch-anim 1.2s linear infinite; }
      `}</style>

      <div className="pointer-events-none fixed inset-0 mix-blend-screen opacity-16 scanlines" />
      <div className="pointer-events-none fixed inset-0 bg-[url('/_oc_noise.png')] opacity-10" />

      <header className="max-w-6xl mx-auto p-6 flex items-center justify-between z-10 relative">
        <div className="flex items-center gap-4">
          <div className="w-12 h-12 bg-gradient-to-br from-purple-600 to-pink-500 rounded-2xl shadow-2xl flex items-center justify-center transform -skew-x-6">ğŸ•¶ï¸</div>
          <div>
            <GlitchText className="text-2xl font-bold tracking-tight" text={'OverCity 2098 â€” Broker Nexus'} />
            <p className="text-sm text-zinc-400">ì€ë°€í•œ ì˜ë¢°, ì•ˆì „í•œ ì—°ê²° â€” ë¡œê·¸? ìš°ë¦¬ëŠ” ê·¸ëŸ° ê±¸ ëª¨ë¥¸ë‹¤.</p>
          </div>
        </div>

        <nav className="flex gap-3 items-center">
          <NavButton icon={<Home size={16} />} active={route==='home'} onClick={()=>setRoute('home')}>Home</NavButton>
          <NavButton icon={<List size={16} />} active={route==='jobs'} onClick={()=>setRoute('jobs')}>Jobs <span className="ml-1 text-xs text-zinc-400">({jobs.length})</span></NavButton>
          <NavButton icon={<Zap size={16} />} active={route==='intel'} onClick={()=>setRoute('intel')}>Intel</NavButton>
          <NavButton icon={<MapPin size={16} />} active={route==='map'} onClick={()=>setRoute('map')}>Map</NavButton>
          <NavButton icon={<Mail size={16} />} active={route==='contact'} onClick={()=>setRoute('contact')}>Contact</NavButton>

          <div className="ml-2 flex items-center gap-2">
            <button onClick={()=>setAuthModalOpen(true)} className="px-3 py-2 rounded-lg border border-zinc-700 text-sm flex items-center gap-2">{Object.keys(loggedIn).length? 'ë¸Œë¡œì»¤' : 'ë¡œê·¸ì¸'} <Key size={14} /></button>
            <button onClick={()=>setNoiseOn(n=>!n)} className="px-2 py-2 rounded-lg border text-xs">ì‚¬ìš´ë“œ</button>
          </div>
        </nav>
      </header>

      <main className="max-w-6xl mx-auto px-6 pb-20 relative z-10">
        {route === 'home' && (
          <section>
            <Hero wallet={wallet} />

            <div className="mt-8 grid grid-cols-1 md:grid-cols-4 gap-6">
              <Card title="ë¸Œë¡œì»¤ í”„ë¡œí•„" desc="í”„ë¡œí•„ì„ ì„¤ì •í•˜ê³ , ì‹ ë¢° ì ìˆ˜ë¥¼ ìŒ“ìœ¼ì„¸ìš”. (ë¡œì»¬ ì €ì¥)" />
              <Card title="ì•”ì‹œì¥" desc="ì•„ì´í…œ ë¼ì¸ì—…ê³¼ êµ¬ë§¤. ìµëª… íŠ¸ëœì­ì…˜ì€ ì‹¤í—˜ì ì…ë‹ˆë‹¤." />
              <Card title="ì—°ê²° í¬í„¸" desc="ì˜ë¢° ë“±ë¡ê³¼ ì§ì ‘ ì—°ê²° -- ìµëª… ì˜µì…˜ í¬í•¨." />
              <Card title="ë¹„ë°€ íŒì—…" desc={`ì˜¤ì§ ${SECRET_OWNER}ë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ë¹„ë°€ ê³µê°„.`} />
            </div>

            <section className="mt-8 p-6 rounded-2xl bg-gradient-to-br from-zinc-850 to-zinc-900 border border-zinc-800 backdrop-blur-md">
              <h3 className="text-lg font-semibold"><GlitchText text={'ìµœê·¼ í™œë™'} className={'inline-block'} /></h3>
              <p className="text-sm text-zinc-400 mt-2">ì‚¬ëŒë“¤ì´ ìš°ë¦¬ì—ê²Œ ë‚¨ê¸´ ì˜ë¢°(ìƒ˜í”Œ) ë° í˜„ì¬ ì˜¤í”ˆëœ ì˜ë¢°ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>

              <div className="mt-4 grid md:grid-cols-3 gap-4">
                <div className="p-4 bg-zinc-900 rounded-xl border">
                  <h4 className="font-semibold">ì´ ì™„ë£Œ ì˜ë¢°</h4>
                  <div className="text-3xl font-bold mt-2">{jobs.filter(j=>j.status==='completed').length}</div>
                  <p className="text-xs text-zinc-500 mt-1">ê³¼ê±° ì˜ë¢° í†µê³„</p>
                </div>
                <div className="p-4 bg-zinc-900 rounded-xl border">
                  <h4 className="font-semibold">ì˜¤í”ˆ ì˜ë¢°</h4>
                  <div className="text-3xl font-bold mt-2">{jobs.filter(j=>j.status==='open').length}</div>
                  <p className="text-xs text-zinc-500 mt-1">í˜„ì¬ ì ‘ìˆ˜ ê°€ëŠ¥í•œ ì˜ë¢°</p>
                </div>
                <div className="p-4 bg-zinc-900 rounded-xl border">
                  <h4 className="font-semibold">ì§€ê°‘</h4>
                  <div className="text-3xl font-bold mt-2">{wallet} creds</div>
                  <p className="text-xs text-zinc-500 mt-1">í˜„ê¸ˆì„± í¬ë ˆë”§</p>
                </div>
              </div>

              <div className="mt-6">
                <h4 className="font-semibold">ìµœê·¼ ì˜ë¢°(ì‚¬ìš©ì ì œì¶œ ì–‘ì‹ ì˜ˆì‹œ)</h4>
                <div className="mt-3 space-y-3">
                  {jobs.slice(0,6).map(j => (
                    <div key={j.id} className="p-3 bg-zinc-850 rounded-lg border border-zinc-800">
                      <div className="flex justify-between items-start">
                        <div>
                          <div className="font-semibold"><GlitchText text={j.title} /></div>
                          <div className="text-xs text-zinc-400">{j.location} Â· ë³´ìƒ: {j.reward} Â· ìƒíƒœ: {j.status}</div>
                        </div>
                        <div className="text-xs text-zinc-500">{j.client}</div>
                      </div>
                      <p className="mt-2 text-sm text-zinc-300">{j.desc}</p>
                    </div>
                  ))}
                </div>
              </div>

            </section>
          </section>
        )}

        {route === 'jobs' && (
          <section className="mt-6">
            <div className="flex items-center justify-between">
              <h2 className="text-xl font-semibold">ì˜ë¢° ëª©ë¡</h2>
              <div className="flex items-center gap-2">
                <input value={query} onChange={e=>setQuery(e.target.value)} placeholder="ê²€ìƒ‰: í•´í‚¹, ì ì…, ë°°ë‹¬..." className="bg-zinc-800 px-3 py-2 rounded-lg text-sm outline-none" />
              </div>
            </div>

            <div className="mt-4 grid gap-4 md:grid-cols-2">
              {filteredJobs.map(job => (
                <motion.div whileHover={{ y: -6 }} key={job.id} className={`p-4 bg-zinc-850 rounded-2xl border ${job.status==='open'? 'border-emerald-600/30' : 'border-zinc-800'}`}>
                  <div className="flex items-start justify-between">
                    <div>
                      <h3 className="font-bold text-lg"><GlitchText text={job.title} /></h3>
                      <p className="text-xs text-zinc-400">í´ë¼ì´ì–¸íŠ¸: {job.client} Â· ë³´ìƒ: {job.reward} creds Â· ìƒíƒœ: {job.status}</p>
                      <div className="mt-2 flex gap-2 flex-wrap">
                        {job.tags.map(t => <span key={t} className="text-xs px-2 py-1 bg-zinc-800 rounded-full">{t}</span>)}
                      </div>
                    </div>
                    <div className="flex flex-col gap-2">
                      <button onClick={()=>setSelectedJob(job)} className="px-3 py-1 rounded-lg bg-gradient-to-br from-blue-600 to-cyan-500 text-black text-sm">ë³´ê¸°</button>
                      {job.status==='open' && <button onClick={async ()=>{ const pw = prompt('ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìˆ˜ì‹ ìì™€ ê³µìœ )'); if(!pw) return; const enc = await encryptAES('Accept:'+job.id, pw); setSecureMessage(enc); setRoute('contact')}} className="px-3 py-1 rounded-lg border border-zinc-700 text-sm">ìˆ˜ë½(ì•”í˜¸í™”)</button>}
                    </div>
                  </div>
                </motion.div>
              ))}
            </div>

            {selectedJob && (
              <div className="mt-6 p-4 bg-zinc-900 rounded-xl border border-zinc-800">
                <h3 className="font-semibold">ì˜ë¢° ìƒì„¸ â€” {selectedJob.title}</h3>
                <p className="text-sm text-zinc-300 mt-2">{selectedJob.desc}</p>
                <p className="text-xs text-zinc-500 mt-2">ìœ„ì¹˜: {selectedJob.location} Â· ë‹¨ê³„: {selectedJob.difficulty}</p>
                <div className="mt-3 flex gap-2">
                  {selectedJob.status==='open' && <button onClick={async ()=>{ const pw = prompt('ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ë¡œì»¬ í‚¤)'); if(!pw) return; const enc = await encryptAES('Accept:'+selectedJob.id, pw); setSecureMessage(enc); setRoute('contact')}} className="px-3 py-1 rounded-lg bg-gradient-to-br from-emerald-500 to-green-400 text-black">ì‹¤í–‰</button>}
                  <button onClick={()=>setSelectedJob(null)} className="px-3 py-1 rounded-lg border border-zinc-700">ë‹«ê¸°</button>
                </div>
              </div>
            )}
          </section>
        )}

        {route === 'intel' && (
          <section className="mt-6">
            <h2 className="text-xl font-semibold">ì‹¤ì‹œê°„ ì¸í…”</h2>
            <div className="mt-4 space-y-3">
              {intel.map(i => (
                <article key={i.id} className="p-3 bg-zinc-850 rounded-lg border border-zinc-800 backdrop-blur-sm">
                  <div className="flex justify-between items-start">
                    <div>
                      <h4 className="font-semibold">{i.title}</h4>
                      <p className="text-xs text-zinc-400">{i.time} Â· ì‹ ë¢°ë„: {i.trust}</p>
                    </div>
                    <div className="text-xs px-2 py-1 bg-zinc-800 rounded">#{i.tag}</div>
                  </div>
                  <p className="mt-2 text-sm text-zinc-300">{i.body}</p>
                </article>
              ))}
            </div>
          </section>
        )}

        {route === 'map' && (
          <section className="mt-6">
            <h2 className="text-xl font-semibold">ì˜¤ë²„ì‹œí‹° ì§€ë„</h2>
            <div className="mt-4 grid md:grid-cols-3 gap-4">
              {mapZones.map(z => (
                <div key={z.id} className="p-4 bg-zinc-850 rounded-xl border border-zinc-800 transform hover:scale-105 transition-transform">
                  <h3 className="font-semibold">{z.name}</h3>
                  <p className="text-xs text-zinc-400">ë ˆë²¨: {z.level} Â· ì£¼ì˜: {z.hazard}</p>
                  <p className="mt-2 text-sm text-zinc-300">{z.desc}</p>
                  <p className="mt-2 text-xs text-zinc-500">í•µì‹¬ í¬ì¸íŠ¸: {z.key}</p>
                </div>
              ))}
            </div>
          </section>
        )}

        {route === 'contact' && (
          <section className="mt-6 max-w-2xl">
            <h2 className="text-xl font-semibold">ë³´ì•ˆ ì±„ë„</h2>
            <p className="text-sm text-zinc-400 mt-1">ë©”ì‹œì§€ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤ì œ AES-GCMìœ¼ë¡œ ì•”í˜¸í™”ë©ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ëŠ” ë¡œì»¬ì—ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>

            <div className="mt-4 p-4 bg-zinc-850 rounded-xl border border-zinc-800">
              <label className="text-xs text-zinc-400">ë³´ë‚¼ ë©”ì‹œì§€</label>
              <textarea value={secureMessage} onChange={e=>setSecureMessage(e.target.value)} className="w-full mt-2 bg-zinc-800 p-3 rounded-lg text-sm h-28"></textarea>

              <div className="mt-3 flex gap-2">
                <button onClick={async ()=>{ const pw = prompt('ì•”í˜¸ ì…ë ¥ (ìˆ˜ì‹ ìì™€ ê³µìœ )'); if(!pw) return; const enc = await encryptAES(secureMessage || 'ping', pw); navigator.clipboard?.writeText(enc); alert('ì•”í˜¸í™”ëœ í˜ì´ë¡œë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.') }} className="px-3 py-2 rounded-lg bg-gradient-to-br from-indigo-600 to-violet-500 text-black flex items-center gap-2">ì•”í˜¸í™” & ë³µì‚¬ <Lock size={14} /></button>
                <button onClick={async ()=>{ const pack = prompt('ë³µí˜¸í™”í•  í˜ì´ë¡œë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”'); const pw = prompt('ì•”í˜¸ ì…ë ¥'); if(!pack||!pw) return; const dec = await decryptAES(pack, pw); if(!dec) alert('ë³µí˜¸í™” ì‹¤íŒ¨'); else setSecureMessage(dec)}} className="px-3 py-2 rounded-lg border">ë³µí˜¸í™”</button>
                <button onClick={()=>{setSecureMessage('')}} className="px-3 py-2 rounded-lg border">ì§€ìš°ê¸°</button>
              </div>

              <div className="mt-4 text-xs text-zinc-500">íŒ: ë©”ì‹œì§€ ì•ì— Accept:JOB_ID ë¥¼ ë¶™ì´ë©´ ë‚´ë¶€ ì›Œí¬í”Œë¡œìš°ê°€ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤.</div>
            </div>

            <div className="mt-6 p-4 bg-zinc-900 rounded-xl border">
              <h4 className="font-semibold">ì•„ì´í…œ ë§ˆì¼“</h4>
              <p className="text-xs text-zinc-400 mt-1">êµ¬ë§¤í•œ ì•„ì´í…œì€ ë¡œì»¬ì— ì €ì¥ë©ë‹ˆë‹¤. (ë°ëª¨)</p>
              <div className="mt-3 grid md:grid-cols-2 gap-3">
                {items.map(it => (
                  <div key={it.id} className="p-3 bg-zinc-850 rounded-lg border flex items-center justify-between">
                    <div>
                      <div className="font-semibold">{it.name}</div>
                      <div className="text-xs text-zinc-400">{it.desc}</div>
                      <div className="text-xs text-zinc-500 mt-1">ì¬ê³ : {it.stock}</div>
                    </div>
                    <div className="flex flex-col items-end gap-2">
                      <div className="font-bold">{it.price} creds</div>
                      <button disabled={it.stock<=0} onClick={()=>buyItem(it.id)} className="px-3 py-1 rounded-lg bg-gradient-to-br from-rose-500 to-orange-400 text-black text-sm">êµ¬ë§¤</button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </section>
        )}

        {/* Secret popup â€” ì´ì œ SECRET_OWNER (ì˜ˆ: raven) ê³„ì •ë§Œ ì ‘ê·¼ ê°€ëŠ¥ */}
        {secretUnlocked && (
          <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} className="fixed right-6 bottom-6 z-50 p-4 bg-black/70 border border-emerald-600 rounded-xl backdrop-blur-md">
            <div className="flex items-center gap-2">
              <div className="text-sm font-semibold">SECRET â€” ë¸Œë¡œì»¤ ì „ìš©</div>
              <button onClick={()=>{navigator.clipboard?.writeText(JSON.stringify({ vault: 'protocol keys', time: Date.now() })); alert('ë¹„ë°€ ë°ì´í„° í´ë¦½ë³´ë“œ ì €ì¥(ë°ëª¨)')}} className="px-2 py-1 rounded bg-emerald-600 text-black text-xs">í´ë¦½</button>
            </div>
            <div className="text-xs text-zinc-400 mt-2">ì´ ê³µê°„ì€ {SECRET_OWNER} ì „ìš©ì…ë‹ˆë‹¤. ì™¸ë¶€ ë…¸ì¶œ ê¸ˆì§€.</div>
          </motion.div>
        )}

      </main>

      <footer className="max-w-6xl mx-auto p-6 text-center text-xs text-zinc-500 z-10 relative">Â© 2098 OverCity Broker Nexus Â· ìš´ì˜íŒ€ì€ ì •ë¶€ ê°ì‹œë¥¼ ì¦ê²¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</footer>

      {/* Auth modal (ë¸Œë¡œì»¤ ê´€ë¦¬) */}
      {authModalOpen && (
        <div className="fixed inset-0 flex items-center justify-center z-60">
          <div className="absolute inset-0 bg-black/70" onClick={()=>setAuthModalOpen(false)} />
          <motion.div initial={{ scale: .95, opacity:0 }} animate={{ scale:1, opacity:1 }} className="relative z-50 w-full max-w-xl p-6 bg-zinc-900 border border-zinc-800 rounded-xl">
            <h3 className="font-semibold text-lg">ë¸Œë¡œì»¤ ê³„ì • ê´€ë¦¬ (ë¡œì»¬)</h3>
            <p className="text-xs text-zinc-400 mt-1">ë“±ë¡/ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”. (ë°ëª¨ìš© ë¡œì»¬ ì €ì¥)</p>

            <div className="mt-4 grid grid-cols-1 gap-3">
              <div className="flex gap-2">
                <button onClick={handleRegister} className="px-3 py-2 rounded bg-emerald-600 text-black">ë¸Œë¡œì»¤ ë“±ë¡</button>
                <button onClick={handleLogin} className="px-3 py-2 rounded bg-rose-500 text-black">ë¸Œë¡œì»¤ ë¡œê·¸ì¸</button>
                <button onClick={()=>{ if(confirm('ëª¨ë‘ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) setLoggedIn({}) }} className="px-3 py-2 rounded border">ë¡œê·¸ì•„ì›ƒ(ëª¨ë‘)</button>
              </div>

              <div className="text-xs text-zinc-400">í˜„ì¬ ë“±ë¡ëœ ë¸Œë¡œì»¤: {Object.keys(users).join(', ') || 'ì—†ìŒ'}</div>
              <div className="text-xs text-zinc-400">í˜„ì¬ ë¡œê·¸ì¸: {Object.keys(loggedIn).join(', ') || 'ì—†ìŒ'}</div>
            </div>

            <div className="mt-4 text-xs text-zinc-500">ì£¼ì˜: ì´ ë°ëª¨ëŠ” ë¡œì»¬ ì•”í˜¸í™”/ì €ì¥ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì‹¤ì‚¬ìš© ì „ ë³´ì•ˆ ê°ì‚¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</div>
          </motion.div>
        </div>
      )}

    </div>
  )
}

// ---------- Small UI components ----------
function NavButton({ children, icon, active, onClick }){
  return (
    <button onClick={onClick} className={`flex items-center gap-2 px-3 py-2 rounded-lg ${active? 'bg-zinc-800 border border-zinc-700': 'hover:bg-zinc-900'}`}>
      <span className="opacity-90">{icon}</span>
      <span className="text-sm">{children}</span>
    </button>
  )
}

function GlitchText({ text, className }){
  // ê¸€ë¦¬ì¹˜ íš¨ê³¼: ì›ë³¸ + ë ˆì´ì–´(ë¹¨ê°•/íŒŒë‘)
  return (
    <span className={`glitch-wrap ${className || ''}`} style={{ position: 'relative' }}>
      <span style={{ position:'relative' }}>{text}</span>
      <span className="glitch glitch-red" aria-hidden>{text}</span>
      <span className="glitch glitch-blue" aria-hidden>{text}</span>
    </span>
  )
}

function Hero({ wallet }){
  return (
    <section className="mt-2 p-6 rounded-2xl bg-gradient-to-br from-zinc-850 to-zinc-900 border border-zinc-800 backdrop-blur-sm scanlines">
      <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <h2 className="text-3xl font-bold"><GlitchText text={'OverCity â€” ë’·ê³¨ëª©ì—ì„  ìš°ë¦¬ëŠ” ë²•ë³´ë‹¤ ë¹ ë¥´ë‹¤'} /></h2>
          <p className="text-zinc-400 mt-2">ì˜ë¢° ì ‘ìˆ˜ Â· ìµëª… ì—°ê²° Â· ì‹¤ì‹œê°„ ì¸í…”. ë¸Œë¡œì»¤ë¡œì„œ í•„ìš”í•œ ëª¨ë“  ë„êµ¬ë¥¼ í•œ ê³³ì—.</p>
          <div className="mt-3 text-xs text-zinc-500">ê²½ê³ : ì •ë¶€ ê°ì‹œëŠ” ëŠ˜ì–´ë‚¬ìŠµë‹ˆë‹¤. ì€ë°€í•˜ê²Œ í–‰ë™í•˜ì„¸ìš”.</div>
        </div>
        <div className="flex gap-2 items-center">
          <div className="text-xs text-zinc-400">ì§€ê°‘</div>
          <div className="px-3 py-2 rounded-2xl bg-zinc-800 border">{wallet} creds</div>
          <button className="px-4 py-2 rounded-2xl bg-gradient-to-br from-rose-500 to-orange-400 text-black">ì˜ë¢° ì˜¬ë¦¬ê¸°</button>
        </div>
      </div>
    </section>
  )
}

function Card({ title, desc }){
  return (
    <div className="p-4 bg-zinc-850 rounded-2xl border border-zinc-800">
      <h4 className="font-semibold">{title}</h4>
      <p className="text-sm text-zinc-400 mt-2">{desc}</p>
    </div>
  )
}

// ----- Expanded sample data: ì‚¬ìš©ì ì œì¶œ ì–‘ì‹ ìŠ¤íƒ€ì¼ë¡œ ì˜ë¢°ë¬¸ì„ êµ¬ì²´í™” -----
const expandedJobs = [
  { id: 'H-1001', title: "í—¬ë¦­ìŠ¤ ë¡œê·¸ ì •ë¦¬ â€” 'ì œë°œ ë¶€íƒí•´ìš”'", client: 'ê¹€. (ê°œì¸)', reward: 8000, tags: ['clean','forensics'], location: 'Mid-Arcology 3F', difficulty: 'Medium', desc: '"ì œ ì‹¤ìˆ˜ë¡œ ì—°êµ¬ì†Œ ì ‘ì† í”ì ì´ ë‚¨ì•˜ì–´ìš”. ì•„ì´ë“¤ ë•Œë¬¸ì— ì†Œë€ í”¼ìš°ê¸° ì‹«ìŠµë‹ˆë‹¤. ë¡œê·¸ì—ì„œ ì œ í”ì ì„ ì§€ì›Œì£¼ì„¸ìš”." â€” ê°œì¸ ì˜ë¢°ì¸', status: 'completed' },
  { id: 'H-1002', title: "ë¸”ë™ì…°ë„ìš° ì ì… â€” 'ê°€ì¡±ì„ êµ¬í•´ì£¼ì„¸ìš”'", client: 'ìµëª…', reward: 15000, tags: ['infiltrate','stealth'], location: 'Lower Docks', difficulty: 'High', desc: '"ë°°ì†¡ì°¨ë¡œ ìœ„ì¥í•´ì„œ êµ¬ì—­ì— ë“¤ì–´ê°€ì•¼ í•©ë‹ˆë‹¤. ë‚´ë¶€ì—ì„œ íŠ¹ì • ë´‰íˆ¬ë¥¼ íšŒìˆ˜í•´ì•¼ í•´ìš”. ì¹˜ëª…ìƒì€ ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤." â€” ìµëª…', status: 'completed' },

  // ì˜¤í”ˆëœ ì˜ë¢° â€” ì¼ë°˜ì¸ì´ ë‚¨ê¸´ ëŠë‚Œìœ¼ë¡œ êµ¬ì²´í™”
  { id: 'J-9001', title: "ë°ì´í„° ìŠ¤í‚¤ë° â€” ì—°êµ¬ì†Œ ë¡œê·¸ (ê¸´ê¸‰)", client: 'ìµëª…(ì—°êµ¬ì›)', reward: 12000, tags: ['hack','stealth'], location: 'Mid-Arcology 7F', difficulty: 'High', desc: '"ì €ëŠ” í•´ë‹¹ ì—°êµ¬ì†Œì˜ ë‚´ë¶€ ì—°êµ¬ì›ì´ì§€ë§Œ ë‚´ë¶€ ê³ ë°œìì…ë‹ˆë‹¤. íŠ¹ì • í”„ë¡œì íŠ¸ì˜ ë¡œê·¸(2098-09 ~ 2098-11)ë¥¼ ì™¸ë¶€ë¡œ ë¹¼ë‚¼ ìˆ˜ ìˆë‚˜ìš”? ì¦ê±°ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ì§€ë§Œ ëª¨ë‹ˆí„°ë§ì´ ì‹¬í•´ìš”."', status: 'open' },

  { id: 'J-9002', title: "ìŠ¤í˜ì…œ íŒ¨í‚¤ì§€ ë°°ë‹¬ â€” 'ê¸‰í•©ë‹ˆë‹¤'", client: 'ì†Œí˜• ê°±', reward: 2300, tags: ['delivery','fast'], location: 'Neon Market, Sector 3', difficulty: 'Low', desc: '"ì •í•´ì§„ ì‹œê°„(23:10-23:30)ì— Aâ†’B ì§€ì ìœ¼ë¡œ íŒ¨í‚¤ì§€ ì „ë‹¬. ê²‰ìœ¼ë¡œ ë³´ê¸°ì—” ìŒì‹ ë°°ë‹¬ì²˜ëŸ¼. ê°ì‹œê°€ ë‚®ì€ ì‹œê°„ëŒ€ì…ë‹ˆë‹¤. ì°¨ëŸ‰ ì œê³µ ê°€ëŠ¥."', status: 'open' },

  { id: 'J-9003', title: "ì•„ì´ì–¸ í¬ê²Ÿ â€” í‘œì  íšŒìˆ˜ (ë¯¼ê°)", client: 'ê¸°ì—…ì²­ë¶€', reward: 48000, tags: ['extraction','high-risk'], location: 'Corporate Spire 12', difficulty: 'Very High', desc: '"íšŒì‚¬ì˜ ë‚´ë¶€ ì»¨íƒì—ì„œ í‘œì ì„ ì•ˆì „í•˜ê²Œ ë°ë ¤ì˜¤ê¸¸ ì›í•¨. ë¹„ì¹˜ëª…ì  ì œì•• ê¶Œì¥. ê²½í˜¸ì› ë‹¤ìˆ˜, ê¶Œí•œ í† í°ì´ í•„ìš”í•  ìˆ˜ë„ ìˆìŒ."', status: 'open' },

  { id: 'J-9101', title: "ìŠ¤ë§ˆíŠ¸ ì„¼ì„œ êµë€ â€” ì´ë²¤íŠ¸", client: 'ì–¸ë”ë„· í¬ëŸ¼', reward: 9000, tags: ['electronic','timing'], location: 'Neon Market', difficulty: 'Medium', desc: '"ì‹œì¥ êµ¬ì—­ Aì˜ ì„¼ì„œê°€ 30ì´ˆ ë™ì•ˆ ë©ˆì¶°ì•¼ í•©ë‹ˆë‹¤. ìƒì¸ë“¤ì´ ì¼ì‹œì ìœ¼ë¡œ ì§„ì—´ì„ ë°”ê¿€ ìˆ˜ ìˆë„ë¡ êµë€ ìŠ¤í¬ë¦½íŠ¸ ë°°í¬ í•„ìš”."', status: 'open' },

  { id: 'J-9102', title: "ì€ìƒ‰ íŒ¨ìŠ¤ ìœ„ì¡° â€” ì¶œì… í—ˆê°€", client: 'ì†Œë§¤ìƒ', reward: 4200, tags: ['forge','low-risk'], location: 'Lower Docks', difficulty: 'Low', desc: '"ì„ì‹œ ì¶œì…ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. ë‹¨ê¸°ê°„(4ì‹œê°„) ìœ íš¨í•œ ì¶œì… íŒ¨ìŠ¤ë¡œ, OCR ê²€ì¦ì„ ìš°íšŒí•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì‚¬ì§„ ë° ìµœì†Œ ì •ë³´ ì œê³µ ê°€ëŠ¥."', status: 'open' },

  { id: 'J-9201', title: "ìƒì–´ë²„ë¦° ë…¹ìŒ íšŒìˆ˜ â€” ì—„ë§ˆì˜ ëª©ì†Œë¦¬", client: 'ìµœ. (ì¼ë°˜)', reward: 3000, tags: ['recovery','sensitive'], location: 'Old Subway', difficulty: 'Low', desc: '"ì§€í•˜ì²  íì‡„ì—­ ê·¼ì²˜ì—ì„œ ë…¹ìŒíŒŒì¼ì„ ìƒì–´ë²„ë ¸ì–´ìš”. ì œê²Œ ì¤‘ìš”í•œ ëŒ€í™”ê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ë³µêµ¬ê°€ ê°€ëŠ¥í• ê¹Œìš”? í”ŒëŸ¬ê·¸ë‚˜ ë¬¼ë¦¬ì  ì ‘ê·¼ ë‘˜ ë‹¤ ê°€ëŠ¥í•©ë‹ˆë‹¤."', status: 'open' },
]

const expandedIntel = [
  { id: 'I-1', title: 'ì‹œë‚´ CCTV ë£¨íŠ¸ ì¬ì¡°ì •', time: '2098-11-18 02:12', trust: 'B+', tag: 'surveillance', body: 'ì¤‘ì•™ í†µì œì‹¤ì´ ìƒˆ ìŠ¤ì¼€ì¤„ì„ ë°°í¬ â€” ê³¼ê±° ë£¨íŠ¸ì™€ ì°¨ì´ ìˆìŒ. ì•¼ê°„ íŒ¨í„´ ì£¼ì˜.' },
  { id: 'I-2', title: 'ë¸”ë£¨ë²„ë“œ ë“œë¡  ë°°ì¹˜', time: '2098-11-20 21:04', trust: 'A-', tag: 'aerial', body: 'íŠ¹ì • êµ¬ì—­ ìƒê³µì— ê°ì‹œ ë“œë¡ ì´ ëŠ˜ì–´ë‚¨. ì „ìì „ ì¥ë¹„ ë³´ìœ  ê°€ëŠ¥.' },
  { id: 'I-3', title: 'íë¸Œ ë…¸ë“œ ì¬ë°°ì¹˜', time: '2098-11-21 01:30', trust: 'A', tag: 'network', body: 'ê¸°ì—… ë…¸ë“œë“¤ì´ íŠ¸ë˜í”½ ìš°íšŒ ê²½ë¡œë¥¼ ì„¤ì • â€” íŠ¹ì • êµ¬ê°„ì— ë ˆì´í„´ì‹œ ê¸‰ì¦.' },
]

const expandedMap = [
  { id: 'Z-1', name: 'Neon Market', level: 2, hazard: 'medium', desc: 'ìƒì ê³¼ ì•”ì‹œì¥ í˜¼ì¬. ê°ì‹œ ë¹ˆë„ëŠ” ë‚®ìŒ.', key: 'í›„ë¯¸ ê³¨ëª©ì˜ ìƒì ì°½ê³  â€” êµí™˜ í¬ì¸íŠ¸' },
  { id: 'Z-2', name: 'Mid-Arcology', level: 5, hazard: 'high', desc: 'ê³ ì¸µ ì—°êµ¬/ê¸°ì—… êµ¬ì—­. ë³´ì•ˆ ë ˆì´ì–´ê°€ ë¹½ë¹½í•¨.', key: 'ë³´ì•ˆ ì—˜ë¦¬ë² ì´í„° ë£¨íŠ¸ê°€ í•µì‹¬' },
  { id: 'Z-3', name: 'Lower Docks', level: 3, hazard: 'variable', desc: 'ë°°í›„ ê±°ë˜ì™€ ì†Œê·œëª¨ ê°± í™œë™. ì•¼ê°„ì´ í™œë°œí•¨.', key: 'ì»¨í…Œì´ë„ˆ ì‚¬ì´ ì€ë°€í•œ í†µë¡œ' },
  { id: 'Z-4', name: 'Old Subway', level: 2, hazard: 'low', desc: 'ì¸ì ì´ ë“œë¬¸ ì§€í•˜ í†µë¡œ â€” ì „ì ê°ì‹œ êµ¬ë©ì´ ë§ìŒ.', key: 'íì‡„ì—­ í”Œë«í¼ B' },
  { id: 'Z-5', name: 'Corporate Spire', level: 6, hazard: 'very high', desc: 'ê¸°ì—… í•µì‹¬ êµ¬ì—­ â€” ì ‘ê·¼ì‹œ í—ˆê°€ í•„ìš”.', key: 'ì˜¥ìƒ í†µì‹  ë…¸ë“œ' },
]

const sampleItems = [
  { id: 'IT-1', name: 'ì‹œê·¸ë„ ìŠ¤í¬ë¨ë¸”ëŸ¬', desc: 'ë‹¨ì‹œê°„ ë“œë¡ /ê°ì‹œì™€ í†µì‹  ì°¨ë‹¨', price: 1800, stock: 3 },
  { id: 'IT-2', name: 'Temp ID Chip', desc: 'ì„ì‹œ ì¶œì…ì¦ ì—ë®¬ë ˆì´í„°', price: 950, stock: 8 },
  { id: 'IT-3', name: 'EMP íŒ©(ì†Œí˜•)', desc: 'ì „ìê¸° í„ìŠ¤ë¡œ ë¹„íœ˜ë°œì„± ì¥ë¹„ ë§ˆë¹„', price: 4200, stock: 1 },
]

/*
Deployment guide (ê°„ë‹¨ ìš”ì•½)
1) Vite + React ì„¤ì¹˜ (ì¶”ì²œ):
   - npm create vite@latest overcity -- --template react
   - cd overcity && npm install
   - Tailwind ì„¤ì •: tailwindcss init + postcss + autoprefixer, index.cssì— Tailwind ì§€ì‹œë¬¸ ì¶”ê°€
   - npm install framer-motion lucide-react
2) íŒŒì¼ ë³µì‚¬: ì´ íŒŒì¼ì„ src/OverCityApp.jsx ë¡œ ì €ì¥ í›„ App.jsxì—ì„œ import
3) ë¹Œë“œ/ë°°í¬: npm run build -> Netlify/Cloudflare Pagesì— ë°°í¬

Backend API notes (ê°„ë‹¨ ìŠ¤í™)
- POST /api/register { user } -> returns salt and server-side hash storage (server should never accept plain passwords)
- POST /api/login { user, proof } -> returns JWT
- GET /api/jobs -> returns list of jobs (with fields id,title,desc,client,reward,status)
- POST /api/jobs -> create new job (authenticated)
- POST /api/purchase -> charge and record purchase (authenticated)

ë³´ì•ˆ ê¶Œì¥ì‚¬í•­: ì„œë²„ ì¸¡ì—ì„œ password hashing(scrypt/argon2), rate-limiting, TLS, HSM/Key management ì ìš©
*/
