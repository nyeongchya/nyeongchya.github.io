<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Shadow Broker's Office</title>

<style>
/* ---------------------- GLOBAL ---------------------- */
body {
    margin: 0;
    font-family: 'Malgun Gothic', sans-serif;
    background: linear-gradient(135deg, #040011, #130024, #001827);
    background-size: 300% 300%;
    animation: bgShift 12s ease infinite;
    color: white;
    overflow-x: hidden;
}

@keyframes bgShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

section {
    min-height: 70vh;
    padding: 100px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.neon {
    font-size: 2.8em;
    color: #ff00f7;
    text-shadow: 0 0 14px #ff00f7, 0 0 35px #ff00a6;
}

.panel {
    width: 80%;
    max-width: 850px;
    background: rgba(255,255,255,0.06);
    border: 1.5px solid #00ffe1;
    padding: 30px;
    border-radius: 10px;
    backdrop-filter: blur(6px);
    box-shadow: 0 0 20px #00ffe144;
    margin-top: 30px;
}

/* ---------------------- KEYCARD MENU ---------------------- */
#keycard-menu {
    position: fixed;
    top: 50%;
    left: 25px;
    transform: translateY(-50%);
    z-index: 1000;
}

.key-btn {
    display: block;
    padding: 10px 18px;
    border: 2px solid #00faff;
    background: rgba(0,0,0,0.4);
    margin: 10px 0;
    cursor: pointer;
    color: #00faff;
    transition: 0.2s;
}

.key-btn:hover { background: rgba(0,255,255,0.25); }
.key-btn.active {
    border-color: #ff00f7;
    color: #ff00f7;
    text-shadow: 0 0 8px #ff00f7;
    animation: pulse 1.2s infinite;
}

@keyframes pulse {
    0% { box-shadow: 0 0 8px #ff00f7; }
    50% { box-shadow: 0 0 18px #ff00f7; }
    100% { box-shadow: 0 0 8px #ff00f7; }
}

/* ---------------------- STAFF ---------------------- */
.staff-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 25px;
}

.staff-card {
    border: 1.5px solid #00ffe1;
    padding: 20px;
    background: rgba(255,255,255,0.05);
    border-radius: 8px;
    box-shadow: 0 0 12px #00ffe155;
    cursor: pointer;
}

/* ---------------------- FILES ---------------------- */
.file-item {
    position: relative;
    overflow: hidden;
    padding: 12px 15px;
    background: rgba(255,255,255,0.08);
    border: 1px solid #ff00f7;
    margin: 8px 0;
    border-radius: 5px;
    font-family: Consolas;
    color: #ffbfff;
    transition: all 0.25s ease;
    cursor: pointer;
}

.file-item:hover {
    background: rgba(255,0,255,0.15);
    box-shadow: 0 0 12px #ff00ff;
    transform: translateX(4px);
}

.file-item::after {
    content: '';
    position: absolute;
    top: -20%;
    left: -10%;
    width: 120%;
    height: 40%;
    background: linear-gradient(90deg, rgba(255,0,255,0.3), rgba(0,255,255,0.3), rgba(255,0,255,0.3));
    transform: skewX(-20deg);
    animation: glitchDrop 2s infinite;
}

@keyframes glitchDrop {
    0% { top: -20%; opacity: 0; }
    10% { opacity: 1; }
    50% { top: 100%; opacity: 0; }
    100% { top: 100%; opacity: 0; }
}

.hidden-file {
  display:none;
  color:#ff00ff; 
  border:1px dashed #ff00ff;
  animation: glitch 1s infinite;
}

/* ---------------------- MAP ---------------------- */
.map-grid {
    display: grid;
    grid-template-columns: repeat(6, 40px);
    gap: 6px;
    margin-top: 25px;
}

.map-cell {
    width: 40px;
    height: 40px;
    border: 1px solid #00ffe1;
    background: rgba(255,255,255,0.04);
    cursor: pointer;
}
.map-cell:hover { background: rgba(0,255,255,0.2); }

#map-info { margin-top: 20px; color: #ffb4ff; }

/* ---------------------- REQUEST ---------------------- */
textarea, input {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    background: rgba(255,255,255,0.08);
    border: 1.5px solid #ff00f7;
    color: #fff;
    border-radius: 6px;
    font-size: 1em;
}

button {
    margin-top: 10px;
    padding: 12px 25px;
    font-size: 1em;
    border: 2px solid #00ffe1;
    background: transparent;
    color: #00ffe1;
    cursor: pointer;
}

button:hover { background: rgba(0,255,255,0.2); }
button:active {
    box-shadow: 0 0 15px #00ffe1 inset;
    transform: scale(0.98);
    transition: 0.1s;
}

/* ---------------------- POPUP ---------------------- */
#staff-popup, #file-popup {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.85);
    justify-content:center;
    align-items:center;
    z-index:9999;
}

#staff-data, #file-data {
    background: rgba(30,10,40,0.95);
    border: 1px solid #ff00f7;
    padding: 25px;
    width: 50%;
    text-align:center;
    border-radius:8px;
    color:#fff;
    animation: glitch 1s infinite;
}

@keyframes glitch {
    0% { text-shadow: 2px 2px #ff00f7; }
    50% { text-shadow: -2px -2px #00ffe1; }
    100% { text-shadow: 2px -2px #ff00f7; }
}

/* ---------------------- EFFECTS ---------------------- */
span[style*="#55ff77"] { animation: pulse 1.6s infinite; }
@keyframes pulse {
  0% { text-shadow: 0 0 2px #55ff77; }
  50% { text-shadow: 0 0 9px #55ff77; }
  100% { text-shadow: 0 0 2px #55ff77; }
}

span[style*="#ffaa00"] { animation: blink 1s infinite; }
@keyframes blink { 50% { opacity:0.4; } 100% { opacity:1; } }

body::after {
  content:"";
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  pointer-events:none;
  background: repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.03),
    rgba(255,255,255,0.03) 1px,
    transparent 1px,
    transparent 2px
  );
  opacity:0.07;
  animation: flicker 0.2s infinite;
}

@keyframes flicker { 0% { opacity:0.05; } 50% { opacity:0.15; } 100% { opacity:0.07; } }

#neonFog {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    opacity: 0.32;
}


</style>
</head>

<body>

    <audio id="hover-sound" src="hover.mp3" preload="auto"></audio>
    <audio id="glitch-sound" src="glitch.mp3" preload="auto"></audio>
    
<!-- =========================== -->
<!-- KEYCARD FIXED MENU -->
<!-- =========================== -->
<div id="keycard-menu">
    <div class="key-btn" onclick="nav('hero')">HOME</div>
    <div class="key-btn" onclick="nav('staff')">STAFF</div>
    <div class="key-btn" onclick="nav('request')">REQUEST</div>
    <div class="key-btn" onclick="nav('files')">FILES</div>
    <div class="key-btn" onclick="nav('map')">MAP</div>
</div>

<!-- =========================== -->
<!-- HERO -->
<!-- =========================== -->
<section id="hero">
    <h1 class="neon">A shadow broker's office</h1>
    <p>도시의 가장 어두운 틈에서 움직이는 그림자 브로커 사무소.</p>
    <p>우리는 감시망 아래서 포착되지 않는 일을 처리한다.</p>
</section>

<!-- =========================== -->
<!-- STAFF -->
<!-- =========================== -->
<section id="staff">
    <h1 class="neon">STAFF — CODENAMES</h1>
    <div class="panel staff-grid">
        <div class="staff-card" onclick="openStaff('gw1')">
            <h3>GHOSTWIRE-01</h3>
            <p>정보 거래와 의뢰 판독 담당</p>
        </div>
        <div class="staff-card" onclick="openStaff('gw2')">
            <h3>PORTRIFT-42</h3>
            <p>데이터 운반과 감시망 우회 담당</p>
        </div>
        <div class="staff-card" onclick="openStaff('gw3')">
            <h3>SPECTRENODE-A</h3>
            <p>위험 분석 비인가 Analyst</p>
        </div>
    </div>
</section>

<!-- STAFF POPUP -->
<div id="staff-popup" onclick="closeStaff()">
    <div id="staff-data"></div>
</div>

<!-- =========================== -->
<!-- REQUEST -->
<!-- =========================== -->
<section id="request">
    <h1 class="neon">의뢰 접수 시스템</h1>
    <div class="panel">
        <input type="text" id="request-input" placeholder="의뢰자 코드네임">
        <textarea id="request-content" rows="6" placeholder="의뢰 내용을 입력하세요"></textarea>
        <button onclick="sendRequest()">전송</button>
        <div id="terminal-output" style="margin-top:15px;"></div>
    </div>
</section>

<!-- =========================== -->
<!-- FILES -->
<!-- =========================== -->
<section id="files">
    <h1 class="neon">Encrypted Files</h1>
    <div class="panel" id="files-list">

        <section id="files">
            <h1 class="neon">Encrypted Files</h1>
            <div class="panel" id="files-list">
        
                <!-- 기존 파일들... -->
        
                <!-- ⭐ 여기 넣기 -->
                <div class="file-item secret-file" onclick="openSecret('Z-SHADOW')">
                    <strong>[FILE–Z-SHADOW]</strong><br>
                    <span>비공개 의뢰 — 섀도우 프로토콜</span><br>
                    <span>의뢰자: <b>UNKNOWN SIGNAL</b></span><br>
                    <span>상태: <span style="color:#ff55ff">CLASSIFIED</span></span>
                </div>
        
            </div>
        </section>
        

        <div class="file-item" onclick="openFile('K584')">
            <strong>[FILE–K584]</strong><br>
            <span>제목: 존재하되 존재하지 않는 자</span><br>
            <span>의뢰자: <b>신원 불명</b></span><br>
            <span>상태: <span style="color:#ff2222">FAILED</span></span>
        </div>

        <div class="file-item" onclick="openFile('C901')">
            <strong>[FILE–C901]</strong><br>
            <span>제목: 익명 신분세탁</span><br>
            <span>의뢰자: <b>LAMINAR-9</b></span><br>
            <span>상태: <span style="color:#55ff77">SUCCESS</span></span>
        </div>

        <div class="file-item" onclick="openFile('N777')">
            <strong>[FILE–N777]</strong><br>
            <span>제목: 네온 신호 탈취 사건</span><br>
            <span>의뢰자: <b>PULSEWALKER-Δ13</b></span><br>
            <span>상태: <span style="color:#55ff77">SUCCESS</span></span>
        </div>

        <div class="file-item" onclick="openFile('H021')">
            <strong>[FILE–H021]</strong><br>
            <span>제목: 사라지는 신원 루프</span><br>
            <span>의뢰자: <b>NULLFRAME-0X</b></span><br>
            <span>상태: <span style="color:#ff2222">FAILED</span></span>
        </div>

        <div class="file-item hidden-file" id="hidden-file" onclick="openFile('Z0??')">
            <strong>[FILE–Z0??]</strong><br>
            <span>제목: 기록되지 않은 의뢰</span><br>
            <span>의뢰자: <b>UNKNOWN</b></span><br>
            <span>상태: <span style="color:#ff00ff">?????</span></span>
        </div>

    </div>
</section>

<!-- FILE POPUP -->
<div id="file-popup" onclick="closeFile()">
    <div id="file-data"></div>
</div>

<!-- =========================== -->
<!-- MAP -->
<!-- =========================== -->
<section id="map">
    <h1 class="neon">Back Alley Sector Map</h1>
    <div class="panel">
        <div class="map-grid" id="map-grid"></div>
        <div id="map-info">선택된 구역 없음</div>
    </div>
</section>

<script>
// ===========================
// NAVIGATION
// ===========================
function nav(id){
    document.getElementById(id).scrollIntoView({ behavior: "smooth" });
    document.querySelectorAll(".key-btn").forEach(btn => btn.classList.remove("active"));
    event.target.classList.add("active");
}

// ===========================
// STAFF POPUP
// ===========================
const staffProfiles = {
    gw1: {name:"GHOSTWIRE-01", role:"Memory Hacker", description:"데이터를 훔치고, 기억 흔적을 조작하는 전문가."},
    gw2: {name:"GHOSTWIRE-02", role:"Trace Cleaner", description:"모든 로그와 흔적을 지우는 침묵의 그림자."},
    gw3: {name:"GHOSTWIRE-03", role:"Data Phantom", description:"서버 속에서 사라지고 나타나며 정보를 수집."}   
};

function openStaff(id){
    const staff = staffProfiles[id];
    const popup = document.getElementById("staff-popup");
    const content = document.getElementById("staff-data");
    content.innerHTML = `<h2>${staff.name}</h2><p><strong>Role:</strong> ${staff.role}</p><p>${staff.description}</p><p style="font-size:0.8em;color:#55ff77">Click anywhere to close</p>`;
    popup.style.display="flex";
}
function closeStaff(){ document.getElementById("staff-popup").style.display="none"; }

// ===========================
// FILE POPUP
// ===========================
/* ===========================
   ENCRYPTED FILES — NEW DATA
   =========================== */
   const filesData = {
    "K584": {
        title: "존재하되 존재하지 않는 자",
        content: "대상 존재를 유지하되 외부 기록—행동 로그, CCTV, 시민 데이터베이스에서 완전 삭제하는 임무.",
        status: "FAILED"
    },
    "C901": {
        title: "익명 신분세탁",
        content: "디지털 ID 폐기 후 새로운 시민권 생성. 뉴로-시그너처 재지정 완료.",
        status: "SUCCESS"
    },
    "Z0??": {
        title: "기록되지 않은 의뢰",
        content: "권한 없음. 내용이 고강도 양자 암호화 상태.",
        status: "???"
    },
    "N777": {
        title: "네온 신호 탈취 사건",
        content: "도시 전력망 일부가 '맥박 신호'로 변조됨. 의뢰인은 이 신호가 비밀 집단의 연락망이라 주장하며, 신호 원점을 역추적하길 요청함.",
        status: "PENDING"
    },
    "H021": {
        title: "사라지는 신원 루프",
        content: "한 시민의 디지털 신분이 7일 주기로 초기화됨. 시스템 심층 루프 의심. 루프 생성자의 정체를 추적하라는 의뢰.",
        status: "FAILED"
    },
    "R530": {
        title: "검은 연기의 경로",
        content: "폐공장에서 발생하는 '학습된 연기 패턴'이 무기 밀매 루트를 은폐 중. 드론 감시망을 우회할 새로운 경로 설계 요청.",
        status: "SUCCESS"
    },
    "X002": {
        title: "사고 원점 추적",
        content: "도심 중심부에서 발생한 집단 신경 오류. 불법 신경 링크 실험으로 추정되며, 네트워크 소스 추적 의뢰.",
        status: "PENDING"
    },
    "V913": {
        title: "합성 기억 제조 공정 추적",
        content: "여러 시민에게 동일한 조작 기억이 주입됨. 기억 제조소의 생산점을 추적해달라는 요청.",
        status: "FAILED"
    },
    "D404": {
        title: "존재할 수 없는 존재",
        content: "데이터 그리드 내 존재하지 않아야 할 유령 노드가 감지됨. 추적하면 사라지고, 사라지면 재출현하는 스펙트럼 서버.",
        status: "FAILED"
    }
};

function openFile(id){
    const popup = document.getElementById("file-popup");
    const content = document.getElementById("file-data");
    const file = filesData[id];

    content.innerHTML = `
        <p style="color:#00ffe1; font-family:Consolas;">
            [DECRYPTING FILE–${id}…]
        </p>
        <p style="color:#ffaa00; font-family:Consolas;">■■■□□ 43%</p>
    `;
    popup.style.display = "flex";

    setTimeout(() => {
        content.innerHTML = `
            <h2>${id} — ${file.title}</h2>
            <p>${file.content}</p>
            <p>Status: <span style="color:#ff00ff">${file.status}</span></p>
            <p style="font-size:0.8em;color:#ffaa00">Click anywhere to close</p>
        `;
    }, 800);
}
function closeFile(){ document.getElementById("file-popup").style.display="none"; }

// ===========================
// MAP GRID & PUZZLE
// ===========================
const mapGrid = document.getElementById("map-grid");
const mapInfo = document.getElementById("map-info");
let selectionSequence = [];

for(let i=0;i<36;i++){
    const cell = document.createElement("div");
    cell.className="map-cell";
    cell.onclick=()=>selectMap(i);
    mapGrid.appendChild(cell);
}

function selectMap(i){
    const infoList = ["A1 - 네온 파츠 블랙마켓","A2 - 사각지대 감시장소","A3 - 폐기 메모리 드랍존","A4 - 불법 신경 링크 지점"];
    mapInfo.innerText = infoList[i] || "미확인 구역";

    selectionSequence.push(i);
    if(selectionSequence.length>4) selectionSequence.shift();
    const secretCode = [11,4,22,30];
    if(secretCode.every((v,idx)=>v===selectionSequence[idx])){
        document.getElementById("hidden-file").style.display="block";
        mapInfo.innerText = "숨겨진 의뢰 파일 해금!";
    }
}

// ===========================
// REQUEST TERMINAL
// ===========================
function sendRequest(){
    const input = document.getElementById("request-input").value.trim();
    const output = document.getElementById("terminal-output");
    if(!input){ output.innerText="입력값이 비어 있습니다."; return; }
    output.innerHTML = `<p style="color:#55ff77">[TERMINAL] 암호화된 요청이 전송되었습니다.</p>`;
    document.getElementById("request-input").value="";
}
</script>

<canvas id="neonFog"></canvas>

<!-- =========================== -->
<!-- SECRET REQUEST INTERFACE MODULE -->
<!-- (독립 모듈 형태로 삽입 가능) -->
<!-- =========================== -->

<style>
    /* =========================== */
    /* STATUS-BASED FILE EFFECTS   */
    /* =========================== */
    .file-success {
      border-color: #55ff77;
      animation: successScan 2.2s linear infinite;
    }
    @keyframes successScan {
      0% { box-shadow: 0 0 10px #55ff77; }
      50% { box-shadow: 0 0 20px #55ffaa; }
      100% { box-shadow: 0 0 10px #55ff77; }
    }
    
    .file-pending {
      border-color: #ffaa00;
      animation: pendingBlink 1.2s steps(2, jump-none) infinite;
    }
    @keyframes pendingBlink {
      0% { opacity: 1; }
      50% { opacity: 0.35; }
      100% { opacity: 1; }
    }
    
    .file-failed {
      border-color: #ff0033;
      animation: failedGlitch 0.35s infinite;
    }
    @keyframes failedGlitch {
      0% { transform: translateX(0); }
      20% { transform: translateX(-2px); }
      40% { transform: translateX(2px); }
      60% { transform: translateX(-1px); }
      80% { transform: translateX(1px); }
      100% { transform: translateX(0); }
    }
    
    /* =========================== */
    /* SECRET / CLASSIFIED FILE   */
    /* =========================== */
    .secret-file {
      background: rgba(255,0,255,0.18);
      border: 2px solid #ff00ff;
      box-shadow: 0 0 18px #ff00ffaa;
      position: relative;
      overflow: hidden;
    }
    
    .secret-file::before {
      content: "CLASSIFIED";
      position: absolute;
      top: 8px;
      right: -10px;
      font-size: 0.75em;
      padding: 3px 10px;
      background: #ff00ff99;
      border: 1px solid #ff66ff;
      transform: rotate(10deg);
      color: white;
      font-family: Consolas;
      text-shadow: 0 0 4px #ff00ff;
    }
    
    .secret-file::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(255,0,255,0.06),
        rgba(255,0,255,0.06) 1px,
        transparent 1px,
        transparent 3px
      );
      animation: scanlines 0.25s linear infinite;
    }
    @keyframes scanlines {
      0% { opacity: .1; }
      50% { opacity: .25; }
      100% { opacity: .1; }
    }
    
    /* =========================== */
    /* SECRET POPUP EFFECT         */
    /* =========================== */
    .secret-popup {
      animation: secretReveal 0.7s ease forwards;
    }
    @keyframes secretReveal {
      0% { filter: blur(7px) brightness(0.3); opacity: 0; }
      40% { filter: blur(4px) brightness(0.6); opacity: .5; }
      100% { filter: blur(0) brightness(1); opacity: 1; }
    }
    
    /* Glitchy title */
    .secret-title {
      font-size: 1.6em;
      color: #ff66ff;
      animation: glitchTitle 0.9s infinite;
    }
    @keyframes glitchTitle {
      0% { text-shadow: -2px 0 #ff00ff, 2px 0 #00ffff; }
      50% { text-shadow: -1px -1px #ff00ff, 1px 1px #00ffff; }
      100% { text-shadow: 2px 1px #ff00ff, -2px -1px #00ffff; }
    }
    </style>
    
    
    <!-- =========================== -->
    <!-- SECRET FILE POPUP TEMPLATE -->
    <!-- =========================== -->
    <div id="secret-popup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.88); justify-content:center; align-items:center; z-index:99999;">
      <div id="secret-content" class="secret-popup" style="background:rgba(40,0,50,0.9); padding:25px; border:2px solid #ff00ff; width:50%; border-radius:10px; text-align:center; color:white; font-family:Consolas;"></div>
    </div>
    
    <script>
    /* =========================== */
    /* SECRET FILE DATA TEMPLATE  */
    /* =========================== */
    const secretFiles = {
      "Z-SHADOW": {
        title: "비공개 의뢰 — 섀도우 프로토콜",
        content: "도시 전역에 동시다발적으로 발생한 '검은 패킷'에 대한 기밀 추적 의뢰. 기록되지 않은 백도어 신호가 감지됨.",
        status: "CLASSIFIED"
      }
    };
    
    /* =========================== */
    /* SECRET FILE POPUP FUNCTION */
    /* =========================== */
    function openSecret(id){
      const data = secretFiles[id];
      const popup = document.getElementById("secret-popup");
      const content = document.getElementById("secret-content");
    
      content.innerHTML = `
        <h2 class="secret-title">${data.title}</h2>
        <p style="margin-top:15px;">${data.content}</p>
        <p style="margin-top:20px; color:#ff55ff;">STATUS: ${data.status}</p>
        <p style="margin-top:15px; font-size:0.75em; color:#ffaaee;">(Click anywhere to close)</p>
      `;
    
      popup.style.display = "flex";
    }
    
    function closeSecret(){
      document.getElementById("secret-popup").style.display = "none";
    }
    
    document.getElementById("secret-popup").addEventListener("click", closeSecret);
    </script>
    
    <div class="file-item secret-file" onclick="openSecret('Z-SHADOW')">
        <strong>[FILE–Z-SHADOW]</strong><br>
        <span>비공개 의뢰 — 섀도우 프로토콜</span><br>
        <span>의뢰자: <b>UNKNOWN SIGNAL</b></span><br>
        <span>상태: <span style="color:#ff55ff">CLASSIFIED</span></span>
    </div>
    

</body>
</html>
